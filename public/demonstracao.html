<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seletor de Períodos - Demonstração</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <style>
        .demo-card {
            max-width: 600px;
            margin: 100px auto;
            padding: 30px;
        }
        .result {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="demo-card card">
            <h2 class="mb-4">Seletor de Períodos Aprimorado</h2>
            
            <div class="row g-3">
                <div class="col-md-12">
                    <label for="periodoPredefinido" class="form-label">Período</label>
                    <select class="form-select mb-2" id="periodoPredefinido">
                        <option value="custom">Personalizado...</option>
                        <option value="mes_atual">Mês Atual</option>
                        <option value="mes_anterior">Mês Anterior</option>
                        <option value="trimestre_atual">Trimestre Atual</option>
                        <option value="semestre_atual">Semestre Atual</option>
                        <option value="ano_atual" selected>Ano Atual</option>
                        <option value="ano_anterior">Ano Anterior</option>
                        <option value="ultimos_30">Últimos 30 dias</option>
                        <option value="ultimos_90">Últimos 90 dias</option>
                        <option value="ultimo_ano">Últimos 12 meses</option>
                    </select>
                    <div class="small text-muted">Personalizado:</div>
                    <input type="date" class="form-control mt-1" id="dataInicio" placeholder="Data Início">
                    <input type="date" class="form-control mt-2" id="dataFim" placeholder="Data Fim">
                </div>
            </div>
            
            <div class="result">
                <h5>Período Selecionado:</h5>
                <p><strong>Data Início:</strong> <span id="resultDataInicio">-</span></p>
                <p><strong>Data Fim:</strong> <span id="resultDataFim">-</span></p>
                <p><strong>Período:</strong> <span id="resultPeriodo">Ano Atual</span></p>
            </div>
            
            <div class="mt-4">
                <a href="/" class="btn btn-primary">
                    <i class="fas fa-arrow-left me-2"></i>Voltar ao Dashboard
                </a>
            </div>
        </div>
    </div>

    <script>
        // Função para aplicar período pré-definido
        function aplicarPeriodoPredefinido(periodo) {
            const hoje = new Date();
            let dataInicio = '';
            let dataFim = '';

            switch (periodo) {
                case 'mes_atual':
                    dataInicio = new Date(hoje.getFullYear(), hoje.getMonth(), 1);
                    dataFim = new Date(hoje.getFullYear(), hoje.getMonth() + 1, 0);
                    break;
                case 'mes_anterior':
                    dataInicio = new Date(hoje.getFullYear(), hoje.getMonth() - 1, 1);
                    dataFim = new Date(hoje.getFullYear(), hoje.getMonth(), 0);
                    break;
                case 'trimestre_atual':
                    const mesAtual = hoje.getMonth();
                    const trimestre = Math.floor(mesAtual / 3);
                    const mesInicioTrimestre = trimestre * 3;
                    dataInicio = new Date(hoje.getFullYear(), mesInicioTrimestre, 1);
                    dataFim = new Date(hoje.getFullYear(), mesInicioTrimestre + 3, 0);
                    break;
                case 'semestre_atual':
                    const semestre = Math.floor(hoje.getMonth() / 6);
                    dataInicio = new Date(hoje.getFullYear(), semestre * 6, 1);
                    dataFim = new Date(hoje.getFullYear(), semestre * 6 + 6, 0);
                    break;
                case 'ano_atual':
                    dataInicio = new Date(hoje.getFullYear(), 0, 1);
                    dataFim = new Date(hoje.getFullYear(), 11, 31);
                    break;
                case 'ano_anterior':
                    dataInicio = new Date(hoje.getFullYear() - 1, 0, 1);
                    dataFim = new Date(hoje.getFullYear() - 1, 11, 31);
                    break;
                case 'ultimos_30':
                    dataInicio = new Date(hoje.getTime() - (30 * 24 * 60 * 60 * 1000));
                    dataFim = hoje;
                    break;
                case 'ultimos_90':
                    dataInicio = new Date(hoje.getTime() - (90 * 24 * 60 * 60 * 1000));
                    dataFim = hoje;
                    break;
                case 'ultimo_ano':
                    dataInicio = new Date(hoje.getTime() - (365 * 24 * 60 * 60 * 1000));
                    dataFim = hoje;
                    break;
                case 'custom':
                    return;
            }

            // Formata as datas
            document.getElementById('dataInicio').value = dataInicio ? dataInicio.toISOString().split('T')[0] : '';
            document.getElementById('dataFim').value = dataFim ? dataFim.toISOString().split('T')[0] : '';
            
            // Atualiza o resultado
            updateResult();
        }
        
        function updateResult() {
            const dataInicio = document.getElementById('dataInicio').value;
            const dataFim = document.getElementById('dataFim').value;
            const periodoSelect = document.getElementById('periodoPredefinido');
            const selectedOption = periodoSelect.options[periodoSelect.selectedIndex];
            
            document.getElementById('resultDataInicio').textContent = formatDate(dataInicio);
            document.getElementById('resultDataFim').textContent = formatDate(dataFim);
            document.getElementById('resultPeriodo').textContent = selectedOption.text;
        }
        
        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }
        
        // Event listeners
        document.getElementById('periodoPredefinido').addEventListener('change', (e) => {
            aplicarPeriodoPredefinido(e.target.value);
        });
        
        document.getElementById('dataInicio').addEventListener('change', updateResult);
        document.getElementById('dataFim').addEventListener('change', updateResult);
        
        // Inicialização
        aplicarPeriodoPredefinido('ano_atual');
    </script>
</body>
</html>
